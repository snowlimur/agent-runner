version: "3"

tasks:
  claude:
    cmds:
      - docker compose run --rm claude

  go:
    desc: Build agent-cli and run it from examples/golang workspace
    cmds:
      - cd ../agent-cli && GOCACHE=/tmp/go-build-cache GOMODCACHE=/tmp/go-mod-cache go build -o /tmp/agent-cli .
      - cd golang && /tmp/agent-cli run --debug "print current golang version"

  go:plan:
    desc: Build agent-cli and run YAML pipeline
    cmds:
      - cd ../agent-cli && GOCACHE=/tmp/go-build-cache GOMODCACHE=/tmp/go-mod-cache go build -o /tmp/agent-cli .
      - cd golang && /tmp/agent-cli run --pipeline plan.yml --var TASK_BRANCH="feature-a" --var DUMMY_FILE="TEST.md"
