version: "3"

tasks:
  claude:
    cmds:
      - docker compose run --rm claude

  go:
    cmds:
      - docker compose run --rm claude-go -vv "build and run the project, then print current golang version"

  rust:
    cmds:
      - docker compose run --rm claude-rust "build and run the project, then print current rust version"

  cli:go:
    desc: Build agent-cli and run it from examples/golang workspace
    cmds:
      - cd ../agent-cli && GOCACHE=/tmp/go-build-cache GOMODCACHE=/tmp/go-mod-cache go build -o /tmp/agent-cli .
      - cd golang && /tmp/agent-cli run "build and run the project, then print current golang version"

  cli:go:plan:
    desc: Build agent-cli and run YAML pipeline with 2 prompts (one inline, one from file)
    cmds:
      - cd ../agent-cli && GOCACHE=/tmp/go-build-cache GOMODCACHE=/tmp/go-mod-cache go build -o /tmp/agent-cli .
      - cd golang && /tmp/agent-cli run --pipeline plan.yml
